version: '3.8'
services:
  backend:
    build: { context: ., dockerfile: backend/Dockerfile }
    ports: [ "8000:8000" ]
    volumes: [ ./backend:/app/backend ]
    environment: [ PYTHONUNBUFFERED=1 ]
  frontend:
    build: { context: ./frontend, dockerfile: Dockerfile }
    ports: [ "3000:3000" ]
    volumes: [ ./frontend:/app, /app/node_modules ]
    environment: [ NEXT_PUBLIC_API_URL=http://localhost:8000 ]
    depends_on: [ backend ]
    networks:
      - default

networks:
  default:
    driver: bridge
